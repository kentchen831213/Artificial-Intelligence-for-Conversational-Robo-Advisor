function resize() { $(".card.brown.lighten-2").height($(window).height() - 160), $(window).width() >= 993 ? ($("#chatbox").height($(window).height() - 255), $("#chatbox_content").height($(window).height() - 255), $(".panel-body").height($(window).height() - 275)) : ($("#chatbox").height($(window).height() - 295), $("#chatbox_content").height($(window).height() - 295), $(".panel-body").height($(window).height() - 315)) } window.onload = function () { var e = window.speechSynthesis, i = new SpeechSynthesisUtterance('歡迎使用AIWISFIN智慧機器人'); i.pitch = 1.9, i.rate = 1.5, e.speak(i) }, $(document).ready(function () { document.images && ((new Image).src = "/img/user.png") }), $(".button-collapse").sideNav(), resize(), window.onresize = resize; var query = "", date1 = new Date, date2 = new Date; $(function () { function e(e) { if ("" !== e) { var i = new SpeechSynthesisUtterance(e); i.pitch = 1.9, i.rate = 1.5, t.speak(i) } } function i() { $("#voiceBtn").disabled = !0, $("#voice_icon").css({ transition: "color 1s ease", color: "#c21830" }); var e = new c; e.lang = "zh-Hant-TW", e.interimResults = !1, e.maxAlternatives = 1, e.start(), e.onresult = function (e) { var i = e.results[0][0].transcript; $("#input_text").val(i), s(), o(), console.log("Confidence: " + e.results[0][0].confidence) }, e.onspeechend = function () { e.stop(), $("#voice_icon").css("color", "white", "!important"), $("#voiceBtn").disabled = !1 }, e.onerror = function (e) { $("#voiceBtn").disabled = !1, $("#voiceBtn").textContent = "Start new test", $("#input_text").val("Error occurred in recognition: " + e.error) } } var t = window.speechSynthesis, n = 0, s = function (i) { function t() { 0 == n && (e("請稍後！正在為您查詢中"), $(".chat").append('<li class="clearfix"><div class="message row"><div class="col s2 m2 l2"><img src="/img/photo.png" alt="User Avatar" class="mfr circle responsive-img"></div><div class="col s10 m10 l10 chat-body clearfix left"><p class="left">請稍後...正在為您查詢中</p></div></div></li>'), $(".panel-body").stop().animate({ scrollTop: $(".panel-body")[0].scrollHeight }, 1e3)) } n = 0, query = $("#input_text").val(), $("#input_text").val(""), $(".chat").append('<li class="clearfix"><div class="message row"><div id="message" class="col s2 m2 l2"><img src="/img/user.png" alt="User Avatar" class="mfr circle responsive-img"></div><div class="col s10 m10 l10 chat-body clearfix right"><p class="right">' + query + "</p></div></div></li>"), $(".panel-body").stop().animate({ scrollTop: $(".panel-body")[0].scrollHeight }, 1e3), setTimeout(t, 1e3) }, o = function (i) { return $.getJSON($SCRIPT_ROOT + "/_add_numbers", { query: query }, function (i) { e(i.result), $(".chat").append('<li class="clearfix"><div class="message row"><div class="col s2 m2 l2"><img src="/img/photo.png" alt="User Avatar" class="mfr circle responsive-img"></div><div class="col s10 m10 l10 chat-body clearfix left"><p class="left">' + i.result + "</p></div></div></li>"), $(".panel-body").stop().animate({ scrollTop: $(".panel-body")[0].scrollHeight }, 2e3), $("input[name=query]").focus().select(), n = 1 }), !1 }; $("a#sendbox").bind("click", function () { s(), o() }), $("input[type=text]").bind("keydown", function (e) { 13 == e.keyCode && (s(), o(e), e.preventDefault()) }), $("input[name=query]").focus(); var c = c || webkitSpeechRecognition, a = a || webkitSpeechRecognitionEvent; $("#voiceBtn").click(function () { i() }) });
